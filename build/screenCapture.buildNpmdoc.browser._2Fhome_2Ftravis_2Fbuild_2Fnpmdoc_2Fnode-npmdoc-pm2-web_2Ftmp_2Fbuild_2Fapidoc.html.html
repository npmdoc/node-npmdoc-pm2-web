<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/achingbrain/pm2-web">pm2-web (v2.1.3)</a>
</h1>
<h4>A web based monitor for PM2</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.pm2-web">module pm2-web</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.HostData">
            function <span class="apidocSignatureSpan">pm2-web.</span>HostData
            <span class="apidocSignatureSpan">(data, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData">
            function <span class="apidocSignatureSpan">pm2-web.</span>ProcessData
            <span class="apidocSignatureSpan">(config, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app">
            function <span class="apidocSignatureSpan">pm2-web.</span>app
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pm2-web.</span>HostData.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pm2-web.</span>ProcessData.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pm2-web.</span>app.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pm2-web.</span>routes</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pm2-web.HostData">module pm2-web.HostData</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.HostData.HostData">
            function <span class="apidocSignatureSpan">pm2-web.</span>HostData
            <span class="apidocSignatureSpan">(data, config)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pm2-web.HostData.prototype">module pm2-web.HostData.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.HostData.prototype._removeMissingProcesses">
            function <span class="apidocSignatureSpan">pm2-web.HostData.prototype.</span>_removeMissingProcesses
            <span class="apidocSignatureSpan">(reportedProcesses)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.HostData.prototype.findProcessById">
            function <span class="apidocSignatureSpan">pm2-web.HostData.prototype.</span>findProcessById
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.HostData.prototype.update">
            function <span class="apidocSignatureSpan">pm2-web.HostData.prototype.</span>update
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pm2-web.ProcessData">module pm2-web.ProcessData</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData.ProcessData">
            function <span class="apidocSignatureSpan">pm2-web.</span>ProcessData
            <span class="apidocSignatureSpan">(config, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pm2-web.ProcessData.prototype">module pm2-web.ProcessData.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData.prototype._append">
            function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_append
            <span class="apidocSignatureSpan">(memory, cpu, time)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData.prototype._appendIfDifferent">
            function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_appendIfDifferent
            <span class="apidocSignatureSpan">(array, value, time)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData.prototype._compress">
            function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_compress
            <span class="apidocSignatureSpan">(dataSet, maxSamples)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData.prototype._compressDay">
            function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_compressDay
            <span class="apidocSignatureSpan">(day, now, datapoints, distribution)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData.prototype._compressResourceUsage">
            function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_compressResourceUsage
            <span class="apidocSignatureSpan">(data, time)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData.prototype._map">
            function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_map
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData.prototype.log">
            function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>log
            <span class="apidocSignatureSpan">(type, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.ProcessData.prototype.update">
            function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>update
            <span class="apidocSignatureSpan">(data, system)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pm2-web.app">module pm2-web.app</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app.app">
            function <span class="apidocSignatureSpan">pm2-web.</span>app
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app.super_">
            function <span class="apidocSignatureSpan">pm2-web.app.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pm2-web.app.prototype">module pm2-web.app.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app.prototype._createExpress">
            function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>_createExpress
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app.prototype._createServer">
            function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>_createServer
            <span class="apidocSignatureSpan">(express)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app.prototype._route">
            function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>_route
            <span class="apidocSignatureSpan">(express, controller, url, method)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app.prototype.getAddress">
            function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>getAddress
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app.prototype.setAddress">
            function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>setAddress
            <span class="apidocSignatureSpan">(address)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app.prototype.start">
            function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>start
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.app.prototype.stop">
            function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pm2-web.routes">module pm2-web.routes</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pm2-web.routes.1">
            function <span class="apidocSignatureSpan">pm2-web.routes.</span>1
            <span class="apidocSignatureSpan">($routeProvider)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">pm2-web.routes.</span>0</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pm2-web" id="apidoc.module.pm2-web">module pm2-web</a></h1>


    <h2>
        <a href="#apidoc.element.pm2-web.HostData" id="apidoc.element.pm2-web.HostData">
        function <span class="apidocSignatureSpan">pm2-web.</span>HostData
        <span class="apidocSignatureSpan">(data, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">HostData = function (data, config) {
	Object.defineProperty(this, "_config", {
		enumerable: false,
		value: config
	});

	this.name = data.name;
	this.inspector = data.inspector;
	this.pm2 = data.pm2,
	this.system = {};
	this.processes = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData" id="apidoc.element.pm2-web.ProcessData">
        function <span class="apidocSignatureSpan">pm2-web.</span>ProcessData
        <span class="apidocSignatureSpan">(config, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ProcessData = function (config, data) {
	Object.defineProperty(this, "_config", {
		enumerable: false,
		value: config
	});

	this.usage = {
		cpu: data.usage ? data.usage.cpu : [],
		memory: data.usage ? data.usage.memory : []
	};

	this.logs = [];

	if(Array.isArray(data.logs)) {
		data.logs.forEach(function(log) {
			this.log(log.type, log.data);
		}.bind(this));
	}

	this._map(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.app" id="apidoc.element.pm2-web.app">
        function <span class="apidocSignatureSpan">pm2-web.</span>app
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">app = function (options) {
	EventEmitter.call(this);

	// create container
	this._container = new Container();

	// set up logging
	this._container.createAndRegister("logger", winston.Logger, {
		transports: [
			new (winston.transports.Console)({
				timestamp: true,
				colorize: true
			})
		]
	});

	// non-optional options
	options = options || {};
	options.requiredPm2Version = REQUIRED_PM2_VERSION;

	// parse configuration
	this._container.createAndRegister("config", require(__dirname + "/components/Configuration"), options);

	// web controllers
	this._container.createAndRegister("homeController", require(__dirname + "/routes/Home"));

	// listens for events
	this._container.register("pm2InterfaceFactory", require("pm2-interface"));
	this._container.createAndRegister("pm2Listener", require(__dirname + "/components/PM2Listener"));

	// create express
	this._express = this._createExpress();

	// http(s) server
	this._server = this._createServer(this._express);

	// web sockets
	this._container.createAndRegister("webSocketResponder", require(__dirname + "/components/WebSocketResponder"));
 	this._container.createAndRegister("webSocketServer", WebSocketServer, {
		server: this._server,
		path: "/ws"
	});

	// holds host data
	this._container.createAndRegister("hostList", require(__dirname + "/components/ServerHostList"));

	// make errors a little more descriptive
	process.on("uncaughtException", function (exception) {
		this._container.find("logger").error("PM2", "Uncaught exception", exception &amp;&amp; exception.stack ? exception.stack : "No stack trace
 available");

		throw exception;
	}.bind(this));

	// make sure we shut down cleanly
	process.on("SIGINT", this.stop.bind(this));

	// make sure we shut down cleanly
	process.on("message", function(message) {
		if (message == "shutdown") {
			this.stop();
		}
	});

	// make sure we shut down cleanly
	process.on("exit", this.stop.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pm2-web.HostData" id="apidoc.module.pm2-web.HostData">module pm2-web.HostData</a></h1>


    <h2>
        <a href="#apidoc.element.pm2-web.HostData.HostData" id="apidoc.element.pm2-web.HostData.HostData">
        function <span class="apidocSignatureSpan">pm2-web.</span>HostData
        <span class="apidocSignatureSpan">(data, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">HostData = function (data, config) {
	Object.defineProperty(this, "_config", {
		enumerable: false,
		value: config
	});

	this.name = data.name;
	this.inspector = data.inspector;
	this.pm2 = data.pm2,
	this.system = {};
	this.processes = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pm2-web.HostData.prototype" id="apidoc.module.pm2-web.HostData.prototype">module pm2-web.HostData.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.pm2-web.HostData.prototype._removeMissingProcesses" id="apidoc.element.pm2-web.HostData.prototype._removeMissingProcesses">
        function <span class="apidocSignatureSpan">pm2-web.HostData.prototype.</span>_removeMissingProcesses
        <span class="apidocSignatureSpan">(reportedProcesses)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_removeMissingProcesses = function (reportedProcesses) {
	this.processes = this.processes.filter(function(existingProcess) {
		for(var i = 0; i &lt; reportedProcesses.length; i++) {
			if(reportedProcesses[i].name == existingProcess.name) {
				return true;
			}
		}

		return false;
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	];
	this.system.memory = {
		free: data.system.memory.free,
		total: data.system.memory.total,
		used: data.system.memory.total - data.system.memory.free
	};

	this.<span class="apidocCodeKeywordSpan">_removeMissingProcesses</span>(data.processes);

	data.processes.forEach(function(reportedProcess) {
		var existingProcess = this.findProcessById(reportedProcess.id);

		if(!existingProcess) {
			existingProcess = new ProcessData(this._config, reportedProcess);
			this.processes.push(existingProcess);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.HostData.prototype.findProcessById" id="apidoc.element.pm2-web.HostData.prototype.findProcessById">
        function <span class="apidocSignatureSpan">pm2-web.HostData.prototype.</span>findProcessById
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findProcessById = function (id) {
	for(var i = 0; i &lt; this.processes.length; i++) {
		if(this.processes[i].id == id) {
			return this.processes[i];
		}
	}

	return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		total: data.system.memory.total,
		used: data.system.memory.total - data.system.memory.free
	};

	this._removeMissingProcesses(data.processes);

	data.processes.forEach(function(reportedProcess) {
		var existingProcess = this.<span class="apidocCodeKeywordSpan">findProcessById</span>(reportedProcess.id);

		if(!existingProcess) {
			existingProcess = new ProcessData(this._config, reportedProcess);
			this.processes.push(existingProcess);
		}

		existingProcess.update(reportedProcess, data.system);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.HostData.prototype.update" id="apidoc.element.pm2-web.HostData.prototype.update">
        function <span class="apidocSignatureSpan">pm2-web.HostData.prototype.</span>update
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (data) {
	this.lastUpdated = Date.now();

	["hostname", "cpu_count", "uptime", "time"].forEach(function(key) {
		this.system[key] = data.system[key]
	}.bind(this));

	this.system.load = [
		data.system.load[0],
		data.system.load[1],
		data.system.load[2]
	];
	this.system.memory = {
		free: data.system.memory.free,
		total: data.system.memory.total,
		used: data.system.memory.total - data.system.memory.free
	};

	this._removeMissingProcesses(data.processes);

	data.processes.forEach(function(reportedProcess) {
		var existingProcess = this.findProcessById(reportedProcess.id);

		if(!existingProcess) {
			existingProcess = new ProcessData(this._config, reportedProcess);
			this.processes.push(existingProcess);
		}

		existingProcess.update(reportedProcess, data.system);
	}.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		var existingProcess = this.findProcessById(reportedProcess.id);

		if(!existingProcess) {
			existingProcess = new ProcessData(this._config, reportedProcess);
			this.processes.push(existingProcess);
		}

		existingProcess.<span class="apidocCodeKeywordSpan">update</span>(reportedProcess, data.system);
	}.bind(this));
};

HostData.prototype._removeMissingProcesses = function(reportedProcesses) {
	this.processes = this.processes.filter(function(existingProcess) {
		for(var i = 0; i &lt; reportedProcesses.length; i++) {
			if(reportedProcesses[i].name == existingProcess.name) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pm2-web.ProcessData" id="apidoc.module.pm2-web.ProcessData">module pm2-web.ProcessData</a></h1>


    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData.ProcessData" id="apidoc.element.pm2-web.ProcessData.ProcessData">
        function <span class="apidocSignatureSpan">pm2-web.</span>ProcessData
        <span class="apidocSignatureSpan">(config, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ProcessData = function (config, data) {
	Object.defineProperty(this, "_config", {
		enumerable: false,
		value: config
	});

	this.usage = {
		cpu: data.usage ? data.usage.cpu : [],
		memory: data.usage ? data.usage.memory : []
	};

	this.logs = [];

	if(Array.isArray(data.logs)) {
		data.logs.forEach(function(log) {
			this.log(log.type, log.data);
		}.bind(this));
	}

	this._map(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pm2-web.ProcessData.prototype" id="apidoc.module.pm2-web.ProcessData.prototype">module pm2-web.ProcessData.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData.prototype._append" id="apidoc.element.pm2-web.ProcessData.prototype._append">
        function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_append
        <span class="apidocSignatureSpan">(memory, cpu, time)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_append = function (memory, cpu, time) {
	this.usage.memory = this._compressResourceUsage(this.usage.memory, time);
	this.usage.cpu = this._compressResourceUsage(this.usage.cpu, time);

	this._appendIfDifferent(this.usage.memory, memory, time);
	this._appendIfDifferent(this.usage.cpu, cpu, time);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	this._map(data);
}

ProcessData.prototype.update = function(data, system) {
	this._map(data);

	this.<span class="apidocCodeKeywordSpan">_append</span>((data.memory / system.memory.total) * 100, data.cpu, system.time);
}

ProcessData.prototype.log = function(type, data) {
	if(!type || !data) {
		return;
	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData.prototype._appendIfDifferent" id="apidoc.element.pm2-web.ProcessData.prototype._appendIfDifferent">
        function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_appendIfDifferent
        <span class="apidocSignatureSpan">(array, value, time)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_appendIfDifferent = function (array, value, time) {
	var rounded = ~~value;

	// if the last two datapoints have the same value as the one we're about to add,
	// don't add a third, just change the date of the last one to be now
	// x-----x becomes x-----------x instead of x-----x-----x
	if(array.length &gt; 1 &amp;&amp; array[array.length - 1].y == rounded &amp;&amp; array[array.length - 2].y == rounded) {
		array[array.length - 1].x = time;

		return;
	}

	array.push({
		x: time,
		y: rounded
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}.bind(this));
}

ProcessData.prototype._append = function(memory, cpu, time) {
	this.usage.memory = this._compressResourceUsage(this.usage.memory, time);
	this.usage.cpu = this._compressResourceUsage(this.usage.cpu, time);

	this.<span class="apidocCodeKeywordSpan">_appendIfDifferent</span>(this.usage.memory, memory, time);
	this._appendIfDifferent(this.usage.cpu, cpu, time);
}

ProcessData.prototype._appendIfDifferent = function(array, value, time) {
	var rounded = ~~value;

	// if the last two datapoints have the same value as the one we're about to add,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData.prototype._compress" id="apidoc.element.pm2-web.ProcessData.prototype._compress">
        function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_compress
        <span class="apidocSignatureSpan">(dataSet, maxSamples)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_compress = function (dataSet, maxSamples) {
	var sampleSize = Math.ceil(dataSet.length/maxSamples);

	var output = [];
	var offset = 0;
	var data = 0;
	var date = 0;

	while(offset &lt; dataSet.length) {
		var processed = 0;

		for(var i = 0; i &lt; sampleSize; i++) {
			if(offset + i == dataSet.length) {
				break;
			}

			// might at some point overflow MAX_INT here. won't that be fun.
			date += dataSet[offset + i].x;

			data += dataSet[offset + i].y;

			processed++;
		}

		offset += processed;

		output.push({
			x: date / processed,
			y: data / processed
		});

		data = 0;
		date = 0;
	}

	return output;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	if(dayDifference &gt; distribution.length) {
		return [];
	}

	var percent = distribution[dayDifference];

	return this.<span class="apidocCodeKeywordSpan">_compress</span>(day, (datapoints/100) * percent);
}

ProcessData.prototype._compress = function(dataSet, maxSamples) {
	var sampleSize = Math.ceil(dataSet.length/maxSamples);

	var output = [];
	var offset = 0;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData.prototype._compressDay" id="apidoc.element.pm2-web.ProcessData.prototype._compressDay">
        function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_compressDay
        <span class="apidocSignatureSpan">(day, now, datapoints, distribution)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_compressDay = function (day, now, datapoints, distribution) {
	if(day.length == 0) {
		return day;
	}

	var dayDifference = Math.floor((now - day[day.length - 1].x) / MILLISECONDS_IN_A_DAY);

	if(dayDifference &gt; distribution.length) {
		return [];
	}

	var percent = distribution[dayDifference];

	return this._compress(day, (datapoints/100) * percent);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	// all datapoints were in one day..
	if(days.length == 0) {
		days.push(day);
	}

	// compress each days worth of data
	days.forEach(function(day) {
		var compressed = this.<span class="apidocCodeKeywordSpan">_compressDay</span>(day, now, datapoints, distribution);

		usage = usage.concat(compressed);
	}.bind(this));

	return usage;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData.prototype._compressResourceUsage" id="apidoc.element.pm2-web.ProcessData.prototype._compressResourceUsage">
        function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_compressResourceUsage
        <span class="apidocSignatureSpan">(data, time)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_compressResourceUsage = function (data, time) {
	var datapoints = this._config.get("graph:datapoints");
	datapoints -= 1;

	var distribution = this._config.get("graph:distribution");
	var maxAgeInDays = distribution.length * MILLISECONDS_IN_A_DAY;

	if(data.length &lt; datapoints) {
		return data;
	}

	var now = time;
	var cutoff = now - maxAgeInDays;
	var usage = [];

	var days = [];
	var day = [];

	// group all data by day
	data.forEach(function(datum) {
		if(datum.x &lt; cutoff) {
			// ignore anything older than graph:maxAgeInDays
			return;
		}

		// record date so we can easily compare days
		datum.date = new Date(datum.x);

		if(day[day.length - 1] &amp;&amp; day[day.length - 1].date.getDate() != datum.date.getDate()) {
			days.push(day);
			day = [];
		} else {
			day.push(datum);
		}
	});

	// all datapoints were in one day..
	if(days.length == 0) {
		days.push(day);
	}

	// compress each days worth of data
	days.forEach(function(day) {
		var compressed = this._compressDay(day, now, datapoints, distribution);

		usage = usage.concat(compressed);
	}.bind(this));

	return usage;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
ProcessData.prototype._map = function(data) {
	["id", "pid", "name", "script", "uptime", "restarts", "status&amp;#
x22;, "memory", "cpu", "reloading", "debugPort", "mode"].forEach(function(key) {
		this[key] = data[key];
	}.bind(this));
}

ProcessData.prototype._append = function(memory, cpu, time) {
	this.usage.memory = this.<span class="apidocCodeKeywordSpan">_compressResourceUsage</span>(this.usage.memory, time);
	this.usage.cpu = this._compressResourceUsage(this.usage.cpu, time);

	this._appendIfDifferent(this.usage.memory, memory, time);
	this._appendIfDifferent(this.usage.cpu, cpu, time);
}

ProcessData.prototype._appendIfDifferent = function(array, value, time) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData.prototype._map" id="apidoc.element.pm2-web.ProcessData.prototype._map">
        function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>_map
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_map = function (data) {
	["id", "pid", "name", "script", "uptime", "restarts", "status", "memory", "cpu", "reloading", "debugPort", "mode"].forEach(function
(key) {
		this[key] = data[key];
	}.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	if(Array.isArray(data.logs)) {
		data.logs.forEach(function(log) {
			this.log(log.type, log.data);
		}.bind(this));
	}

	this.<span class="apidocCodeKeywordSpan">_map</span>(data);
}

ProcessData.prototype.update = function(data, system) {
	this._map(data);

	this._append((data.memory / system.memory.total) * 100, data.cpu, system.time);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData.prototype.log" id="apidoc.element.pm2-web.ProcessData.prototype.log">
        function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>log
        <span class="apidocSignatureSpan">(type, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (type, data) {
	if(!type || !data) {
		return;
	}

	this.logs.push({
		type: type,
		data: data
	});

	// rotate logs if necessary
	if(this.logs.length &gt; this._config.get("logs:max")) {
		this.logs.splice(0, this.logs.length - this._config.get("logs:max"));
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		memory: data.usage ? data.usage.memory : []
	};

	this.logs = [];

	if(Array.isArray(data.logs)) {
		data.logs.forEach(function(log) {
			this.<span class="apidocCodeKeywordSpan">log</span>(log.type, log.data);
		}.bind(this));
	}

	this._map(data);
}

ProcessData.prototype.update = function(data, system) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.ProcessData.prototype.update" id="apidoc.element.pm2-web.ProcessData.prototype.update">
        function <span class="apidocSignatureSpan">pm2-web.ProcessData.prototype.</span>update
        <span class="apidocSignatureSpan">(data, system)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (data, system) {
	this._map(data);

	this._append((data.memory / system.memory.total) * 100, data.cpu, system.time);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		var existingProcess = this.findProcessById(reportedProcess.id);

		if(!existingProcess) {
			existingProcess = new ProcessData(this._config, reportedProcess);
			this.processes.push(existingProcess);
		}

		existingProcess.<span class="apidocCodeKeywordSpan">update</span>(reportedProcess, data.system);
	}.bind(this));
};

HostData.prototype._removeMissingProcesses = function(reportedProcesses) {
	this.processes = this.processes.filter(function(existingProcess) {
		for(var i = 0; i &lt; reportedProcesses.length; i++) {
			if(reportedProcesses[i].name == existingProcess.name) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pm2-web.app" id="apidoc.module.pm2-web.app">module pm2-web.app</a></h1>


    <h2>
        <a href="#apidoc.element.pm2-web.app.app" id="apidoc.element.pm2-web.app.app">
        function <span class="apidocSignatureSpan">pm2-web.</span>app
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">app = function (options) {
	EventEmitter.call(this);

	// create container
	this._container = new Container();

	// set up logging
	this._container.createAndRegister("logger", winston.Logger, {
		transports: [
			new (winston.transports.Console)({
				timestamp: true,
				colorize: true
			})
		]
	});

	// non-optional options
	options = options || {};
	options.requiredPm2Version = REQUIRED_PM2_VERSION;

	// parse configuration
	this._container.createAndRegister("config", require(__dirname + "/components/Configuration"), options);

	// web controllers
	this._container.createAndRegister("homeController", require(__dirname + "/routes/Home"));

	// listens for events
	this._container.register("pm2InterfaceFactory", require("pm2-interface"));
	this._container.createAndRegister("pm2Listener", require(__dirname + "/components/PM2Listener"));

	// create express
	this._express = this._createExpress();

	// http(s) server
	this._server = this._createServer(this._express);

	// web sockets
	this._container.createAndRegister("webSocketResponder", require(__dirname + "/components/WebSocketResponder"));
 	this._container.createAndRegister("webSocketServer", WebSocketServer, {
		server: this._server,
		path: "/ws"
	});

	// holds host data
	this._container.createAndRegister("hostList", require(__dirname + "/components/ServerHostList"));

	// make errors a little more descriptive
	process.on("uncaughtException", function (exception) {
		this._container.find("logger").error("PM2", "Uncaught exception", exception &amp;&amp; exception.stack ? exception.stack : "No stack trace
 available");

		throw exception;
	}.bind(this));

	// make sure we shut down cleanly
	process.on("SIGINT", this.stop.bind(this));

	// make sure we shut down cleanly
	process.on("message", function(message) {
		if (message == "shutdown") {
			this.stop();
		}
	});

	// make sure we shut down cleanly
	process.on("exit", this.stop.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.app.super_" id="apidoc.element.pm2-web.app.super_">
        function <span class="apidocSignatureSpan">pm2-web.app.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function WildEmitter() { }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pm2-web.app.prototype" id="apidoc.module.pm2-web.app.prototype">module pm2-web.app.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.pm2-web.app.prototype._createExpress" id="apidoc.element.pm2-web.app.prototype._createExpress">
        function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>_createExpress
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_createExpress = function () {
	var config = this._container.find("config");
	var port = config.get("www:port");

	if(config.get("www:ssl:enabled")) {
		port = config.get("www:ssl:port");
	}

	var express = Express();
	express.set("port", port);
	express.set("view engine", "jade");
	express.set("views", __dirname + "/views");

	// create routes
	this._route(express, "homeController", "/", "get");
	this._route(express, "homeController", "/hosts/:host", "get");

	if(config.get("www:authentication:enabled")) {
		express.use(Express.basicAuth(config.get("www:authentication:username"), config.get("www:authentication:password")));
	}

	express.use(Express.logger("dev"));
	express.use(Express.urlencoded())
	express.use(Express.json())
	express.use(methodOverride('X-HTTP-Method'));          // Microsoft
	express.use(methodOverride('X-HTTP-Method-Override')); // Google/GData, default option
	express.use(methodOverride('X-Method-Override'));      // IBM
	express.use(express.router);
	express.use(Express.static(__dirname + "/public"));

	// development only
	express.use(Express.errorHandler());

	return express;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this._container.createAndRegister("homeController", require(__dirname + "/routes/Home"));

	// listens for events
	this._container.register("pm2InterfaceFactory", require("pm2-interface"));
	this._container.createAndRegister("pm2Listener", require(__dirname + "/components/PM2Listener"));

	// create express
	this._express = this.<span class="apidocCodeKeywordSpan">_createExpress</span>();

	// http(s) server
	this._server = this._createServer(this._express);

	// web sockets
	this._container.createAndRegister("webSocketResponder", require(__dirname + "/components/WebSocketResponder"
;));
	this._container.createAndRegister("webSocketServer", WebSocketServer, {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.app.prototype._createServer" id="apidoc.element.pm2-web.app.prototype._createServer">
        function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>_createServer
        <span class="apidocSignatureSpan">(express)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_createServer = function (express) {
	var config = this._container.find("config");

	if(config.get("www:ssl:enabled")) {
		if(config.get("www:ssl:upgrade")) {
			// create an app that will redirect all requests to the https version
			var httpsUrl = "https://" + config.get("www:host");

			if(config.get("www:ssl:port") != 443) {
				httpsUrl += ":" + config.get("www:ssl:port");
			}

			var redirectApp = Express();
			redirectApp.get("*",function(request, response){
				response.redirect(httpsUrl + request.url);
			});
			process.nextTick(function() {
				this._redirectServer = http.createServer(redirectApp);
				this._redirectServer.listen(config.get("www:port"), function() {
					this._container.find("logger").info("PM2Web", "HTTP to HTTPS upgrade server listening on port " + this._redirectServer.address
().port);
				}.bind(this));
			}.bind(this));
		}

		return https.createServer({
			passphrase: config.get("www:ssl:passphrase"),
			key: fs.readFileSync(config.get("www:ssl:key")),
			cert: fs.readFileSync(config.get("www:ssl:certificate"))
		}, this._express);
	}

	return http.createServer(express);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this._container.register("pm2InterfaceFactory", require("pm2-interface"));
	this._container.createAndRegister("pm2Listener", require(__dirname + "/components/PM2Listener"));

	// create express
	this._express = this._createExpress();

	// http(s) server
	this._server = this.<span class="apidocCodeKeywordSpan">_createServer</span>(this._express);

	// web sockets
	this._container.createAndRegister("webSocketResponder", require(__dirname + "/components/WebSocketResponder"
;));
 	this._container.createAndRegister("webSocketServer", WebSocketServer, {
		server: this._server,
		path: "/ws"
	});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.app.prototype._route" id="apidoc.element.pm2-web.app.prototype._route">
        function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>_route
        <span class="apidocSignatureSpan">(express, controller, url, method)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_route = function (express, controller, url, method) {
	var component = this._container.find(controller);

	express[method](url, component[method].bind(component));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	var express = Express();
	express.set("port", port);
	express.set("view engine", "jade");
	express.set("views", __dirname + "/views");

	// create routes
	this.<span class="apidocCodeKeywordSpan">_route</span>(express, "homeController", "/", "get");
	this._route(express, "homeController", "/hosts/:host", "get");

	if(config.get("www:authentication:enabled")) {
		express.use(Express.basicAuth(config.get("www:authentication:username"), config.get("www:authentication:password
")));
	}

	express.use(Express.logger("dev"));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.app.prototype.getAddress" id="apidoc.element.pm2-web.app.prototype.getAddress">
        function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>getAddress
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAddress = function () {
	return this._address;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.app.prototype.setAddress" id="apidoc.element.pm2-web.app.prototype.setAddress">
        function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>setAddress
        <span class="apidocSignatureSpan">(address)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setAddress = function (address) {
	this._address = address;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
PM2Web.prototype.start = function() {
	var config = this._container.find("config");

	process.nextTick(function() {
		this._server.listen(this._express.get("port"), config.get("www:address"), function() {
			this._container.find("logger").info("Express server listening on " + this._server.address().address + "
;:" + this._server.address().port);

			this.<span class="apidocCodeKeywordSpan">setAddress</span>("http" + (config.get("www:ssl:enabled") ? "
;s": "") + "://" + config.get("www:host") + ":" + this._server.address().port);

			this.emit("start");
		}.bind(this));

		if(config.get("mdns:enabled")) {
			try {
				var mdns = require("mdns2");
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.app.prototype.start" id="apidoc.element.pm2-web.app.prototype.start">
        function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>start
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function () {
	var config = this._container.find("config");

	process.nextTick(function() {
		this._server.listen(this._express.get("port"), config.get("www:address"), function() {
			this._container.find("logger").info("Express server listening on " + this._server.address().address + ":" + this._server.address
().port);

			this.setAddress("http" + (config.get("www:ssl:enabled") ? "s": "") + "://" + config.get("www:host") + ":" + this._server.address
().port);

			this.emit("start");
		}.bind(this));

		if(config.get("mdns:enabled")) {
			try {
				var mdns = require("mdns2");

				this._container.find("logger").info("Starting MDNS adverisment with name", this._container.find("config").get("mdns:name"));

				// publish via Bonjour
				this._advert = mdns.createAdvertisement(mdns.tcp("http"), this._express.get("port"), {
					name: config.get("mdns:name")
				});
				this._advert.start();
			} catch(e) {
				this._container.find("logger").warn("Could not start mdns argument - did mdns2 install correctly?", e.message);
			}
		}
	}.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...




var PM2Web = require(__dirname + "/server/app");

var pm2web = new PM2Web({});
pm2web.<span class="apidocCodeKeywordSpan">start</span>();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pm2-web.app.prototype.stop" id="apidoc.element.pm2-web.app.prototype.stop">
        function <span class="apidocSignatureSpan">pm2-web.app.prototype.</span>stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function () {
	var logger = this._container.find("logger");
	logger = console;

	logger.info("PM2Web", "Shutting down Express");
	this._server.close(function() {
		logger.info("PM2Web", "Express shut down.");
	});

	logger.info("PM2Web", "Shutting WebSocket");
	this._container.find("webSocketServer").close();

	logger.info("PM2Web", "Disconnecting from pm2-interface");
	this._container.find("pm2Listener").close();

	if(this._advert) {
		logger.info("PM2Web", "Shutting down MDNS Advert");
		this._advert.stop();
	}

	if(this._redirectServer) {
		logger.info("PM2Web", "Shutting down HTTP to HTTPS upgrade server");
		this._redirectServer.close(function() {
			logger.info("PM2Web", "HTTP to HTTPS upgrade server shut down.");
		});
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	// make sure we shut down cleanly
	process.on("SIGINT", this.stop.bind(this));

	// make sure we shut down cleanly
	process.on("message", function(message) {
		if (message == "shutdown") {
			this.<span class="apidocCodeKeywordSpan">stop</span>();
		}
	});

	// make sure we shut down cleanly
	process.on("exit", this.stop.bind(this));
};
util.inherits(PM2Web, EventEmitter);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pm2-web.routes" id="apidoc.module.pm2-web.routes">module pm2-web.routes</a></h1>


    <h2>
        <a href="#apidoc.element.pm2-web.routes.1" id="apidoc.element.pm2-web.routes.1">
        function <span class="apidocSignatureSpan">pm2-web.routes.</span>1
        <span class="apidocSignatureSpan">($routeProvider)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">1 = function ($routeProvider) {
		$routeProvider.
			when("/hosts/:host", {
				templateUrl: "/js/partials/host.html"
			}).
			otherwise({
				templateUrl: "/js/partials/connecting.html",
				controller: "ConnectionController"
			});
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>